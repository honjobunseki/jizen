<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>{{ user.username }} さんのページ</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- jQuery と Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <div class="container mt-4">
    <h1>{{ user.username }} さんのページ</h1>
    
    <!-- タブナビゲーション -->
    <ul class="nav nav-tabs" id="userTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="true">プロフィール</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="partners-tab" data-toggle="tab" href="#partners" role="tab" aria-controls="partners" aria-selected="false">施行パートナー一覧</a>
      </li>
    </ul>

    <!-- タブの内容 -->
    <div class="tab-content mt-3" id="userTabContent">
      <!-- プロフィールタブ -->
      <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        <p>ここにはユーザの基本情報やプロフィールが表示されます。</p>
        <p><a href="{{ url_for('logout') }}">ログアウト</a></p>
      </div>

      <!-- 施行パートナー一覧タブ -->
      <div class="tab-pane fade" id="partners" role="tabpanel" aria-labelledby="partners-tab">
        <h2>施行パートナー一覧</h2>
        <ul>
          {% for partner in partners %}
            <li>
              <strong>業者名:</strong> {{ partner.company_name }}<br>
              <strong>代表者:</strong> {{ partner.representative or '未入力' }}<br>
              <strong>電話番号:</strong> {{ partner.phone_number }}<br>
              <!-- 必要に応じて他の項目も表示 -->
            </li>
          {% else %}
            <li>まだ施行パートナーが登録されていません</li>
          {% endfor %}
        </ul>
        <p>
          <a href="{{ url_for('add_partner', username=user.username) }}" class="btn btn-primary">
            施行パートナー（下請け・協力業者）登録
          </a>
        </p>
      </div>
    </div>
  </div>
</body>
</html>
